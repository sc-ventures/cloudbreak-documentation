<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel="canonical" href="http://hortonworks.github.io/cloudbreak-documentation/gateway/index.html"> 
    <link rel="shortcut icon" href="../images/favicon.png">

    <title>Configure the gateway - Cloudbreak</title>

    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">


    <link href="../css/extra.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
    <script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-22950817-24', 'auto');
    ga('send', 'pageview');
    </script>
    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../index.html">Cloudbreak</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Intro <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../index.html">Introduction</a>
</li>

                        
                            
<li >
    <a href="../architecture/index.html">Architecture</a>
</li>

                        
                            
<li >
    <a href="../concepts/index.html">Core concepts</a>
</li>

                        
                            
<li >
    <a href="../deployment-options/index.html">Deployment options</a>
</li>

                        
                            
<li >
    <a href="../security/index.html">Security overview</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Quickstart <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../aws-quick/index.html">Quickstart on AWS</a>
</li>

                        
                            
<li >
    <a href="../azure-quick/index.html">Quickstart on Azure</a>
</li>

                        
                            
<li >
    <a href="../gcp-quick/index.html">Quickstart on GCP</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">AWS <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../aws-pre/index.html">Prerequisites</a>
</li>

                        
                            
<li >
    <a href="../aws-launch/index.html">Launch on AWS</a>
</li>

                        
                            
<li >
    <a href="../aws-create/index.html">Create a cluster</a>
</li>

                        
                            
<li >
    <a href="../aws-data/index.html">Configure access to S3</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Azure <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../azure-pre/index.html">Prerequisites</a>
</li>

                        
                            
<li >
    <a href="../azure-launch/index.html">Launch on Azure</a>
</li>

                        
                            
<li >
    <a href="../azure-create/index.html">Create a cluster</a>
</li>

                        
                            
<li >
    <a href="../azure-data-adls/index.html">Configure access to ADLS</a>
</li>

                        
                            
<li >
    <a href="../azure-data-wasb/index.html">Configure access to WASB</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">GCP <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../gcp-pre/index.html">Prerequisites</a>
</li>

                        
                            
<li >
    <a href="../gcp-launch/index.html">Launch on GCP</a>
</li>

                        
                            
<li >
    <a href="../gcp-create/index.html">Create a cluster</a>
</li>

                        
                            
<li >
    <a href="../gcp-data/index.html">Configure access to GCS</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">OpenStack <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../os-pre/index.html">Prerequisites</a>
</li>

                        
                            
<li >
    <a href="../os-launch/index.html">Launch on OpenStack</a>
</li>

                        
                            
<li >
    <a href="../os-create/index.html">Create a cluster</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Using Cloudbreak <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Advanced cluster options</a>
    <ul class="dropdown-menu">
        
            
<li class="active">
    <a href="index.html">Configure the gateway</a>
</li>

        
            
<li >
    <a href="../blueprints/index.html">Use custom blueprints</a>
</li>

        
            
<li >
    <a href="../recipes/index.html">Use custom scripts (recipes)</a>
</li>

        
            
<li >
    <a href="../mpacks/index.html">Use management packs</a>
</li>

        
            
<li >
    <a href="../images/index.html">Use custom images</a>
</li>

        
            
<li >
    <a href="../tags/index.html">Tag resources</a>
</li>

        
            
<li >
    <a href="../properties/index.html">Set custom properties</a>
</li>

        
            
<li >
    <a href="../security-kerberos/index.html">Enable Kerberos security</a>
</li>

        
            
<li >
    <a href="../autoscaling/index.html">Configure autoscaling</a>
</li>

        
            
<li >
    <a href="../external-db/index.html">Register external database</a>
</li>

        
            
<li >
    <a href="../external-ldap/index.html">Register external authentication source</a>
</li>

        
            
<li >
    <a href="../external-proxy/index.html">Register proxy configuration</a>
</li>

        
            
<li >
    <a href="../hostnames/index.html">Use custom hostnames based on DNS</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Advanced Cloudbreak options</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../cb-credentials/index.html">Manage Cloudbreak credentials</a>
</li>

        
            
<li >
    <a href="../cb-migrate/index.html">Move Cloudbreak instance</a>
</li>

        
            
<li >
    <a href="../cb-ldap/index.html">Configure LDAP/AD authentication for Cloudbreak</a>
</li>

        
            
<li >
    <a href="../security-cb-ssl/index.html">Add SSL certificate for Cloudbreak UI</a>
</li>

        
            
<li >
    <a href="../cb-proxy/index.html">Configure outbound internet access and proxy</a>
</li>

        
            
<li >
    <a href="../security-cb-inbound/index.html">Restrict inbound access to clusters</a>
</li>

        
            
<li >
    <a href="../security-cb-customdom/index.html">Configure access from custom domains</a>
</li>

        
            
<li >
    <a href="../cb-db/index.html">Configure external Cloudbreak database</a>
</li>

        
            
<li >
    <a href="../cb-disable-provider/index.html">Disable providers</a>
</li>

        
            
<li >
    <a href="../cb-ports/index.html">Change default Cloudbreak ports</a>
</li>

        
            
<li >
    <a href="../cb-email/index.html">Set up email notifications</a>
</li>

        
            
<li >
    <a href="../cb-profile/index.html">Modify settings in Cloudbreak Profile</a>
</li>

        
            
<li >
    <a href="../os-image-import/index.html">Manually import HDP and HDF images to OpenStack</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../hdf/index.html">Creating an HDF cluster</a>
</li>

                        
                            
<li >
    <a href="../data-lake/index.html">Setting up a data lake</a>
</li>

                        
                            
<li >
    <a href="../clusters-access/index.html">Accessing a cluster</a>
</li>

                        
                            
<li >
    <a href="../clusters-manage/index.html">Managing clusters</a>
</li>

                        
                            
<li >
    <a href="../hive/index.html">Accessing Hive via JDBC</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cloudbreak CLI</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../cli-install/index.html">Install the CLI</a>
</li>

        
            
<li >
    <a href="../cli-get-started/index.html">Get started with the CLI</a>
</li>

        
            
<li >
    <a href="../cli-reference/index.html">CLI Reference</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Troubleshooting</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../trouble-cb-logs/index.html">Cloudbreak logs</a>
</li>

        
            
<li >
    <a href="../trouble-cb/index.html">Troubleshooting Cloudbreak</a>
</li>

        
            
<li >
    <a href="../trouble-cluster/index.html">Troubleshooting cluster creation</a>
</li>

        
            
<li >
    <a href="../trouble-aws/index.html">Troubleshooting AWS</a>
</li>

        
            
<li >
    <a href="../trouble-azure/index.html">Troubleshooting Azure</a>
</li>

        
            
<li >
    <a href="../trouble-gcp/index.html">Troubleshooting GCP</a>
</li>

        
            
<li >
    <a href="../trouble-cli/index.html">Troubleshooting Cloudbreak CLI</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../cb-upgrade/index.html">Upgrade Cloudbreak</a>
</li>

                        
                            
<li >
    <a href="../cb-delete/index.html">Delete Cloudbreak</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">More <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../releasenotes/index.html">Release Notes</a>
</li>

                        
                            
<li >
    <a href="../faq/index.html">FAQs</a>
</li>

                        
                            
<li >
    <a href="../dev/index.html">Developer documentation links</a>
</li>

                        
                            
<li >
    <a href="../get-help/index.html">Getting help</a>
</li>

                        
                            
<li >
    <a href="../smartsense/index.html">SmartSense telemetry</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Legal</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../acknowledge/index.html">Acknowledgements</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                
                    <li >
                        <a rel="next" href="../os-create/index.html">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../blueprints/index.html">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/hortonworks/cloudbreak-documentation">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#configuring-the-gateway">Configuring the gateway</a></li>
        
            <li class="second-level"><a href="#services-available-via-gateway">Services available via gateway</a></li>
            
        
            <li class="second-level"><a href="#configure-the-gateway">Configure the gateway</a></li>
            
        
            <li class="second-level"><a href="#obtain-urls-for-cluster-resources">Obtain URLs for cluster resources</a></li>
            
        
            <li class="second-level"><a href="#configure-single-sign-on-sso">Configure single sign-on (SSO)</a></li>
            
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h2 id="configuring-the-gateway">Configuring the gateway</h2>
<p>When creating a cluster, Cloudbreak installs and configures a gateway, powered by <a href="https://knox.apache.org/">Apache Knox</a>, to protect access to the cluster resources:</p>
<ul>
<li>This gateway is installed on the same host as the Ambari server.  </li>
<li>
<p>By default, transport layer security on the gateway endpoint is via a <em>self-signed SSL certificate</em> on port 8443. This is illustrated on the following diagram:   </p>
<p><a href="../images/cb_gateway.png" target="_blank" title="click to enlarge"><img src="../images/cb_gateway.png" width="650" title="Cluster Information"></a> </p>
</li>
<li>
<p>The cluster resources that are accessible through the gateway are determined by the settings provided on the <strong>Gateway Configuration</strong> page of the basic create cluster wizard.  </p>
</li>
<li>By default, the gateway is deployed and <em>Ambari</em> is proxied through the gateway.  </li>
<li>The choice of cluster services to expose and proxy through the gateway depends on your blueprint. Cloudbreak analyzes your blueprint and provides a list of services that can be exposed through the gateway. You should review this list and select the services that should be proxied through the gateway.  </li>
<li>If you do not enable the gateway, or you do not expose Ambari (or any other service) through the gateway, you must configure access to those services on the security group on your own. </li>
</ul>
<h3 id="services-available-via-gateway">Services available via gateway</h3>
<p>The following cluster resources are available for access via the gateway endpoint:</p>
<table>
<thead>
<tr>
<th>Cluster resource</th>
<th>URL</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ambari</td>
<td>https://{gateway-host}:8443/{cluster-name}/{topology-name}/ambari/</td>
</tr>
<tr>
<td>Hive and Hive Server Interactive<sup>*</sup></td>
<td>https://{gateway-host}:8443/{cluster-name}/{topology-name}/hive/</td>
</tr>
<tr>
<td>Job History Server</td>
<td>https://{gateway-host}:8443/{cluster-name}/{topology-name}/jobhistory/</td>
</tr>
<tr>
<td>Name Node</td>
<td>https://{gateway-host}:8443/{cluster-name}/{topology-name}/hdfs/</td>
</tr>
<tr>
<td>WebHDFS</td>
<td>https://{gateway-host}:8443/{cluster-name}/{topology-name}/webhdfs/</td>
</tr>
<tr>
<td>Resource Manager</td>
<td>https://{gateway-host}:8443/{cluster-name}/{topology-name}/yarn/</td>
</tr>
<tr>
<td>Spark History Server</td>
<td>https://{gateway-host}:8443/{cluster-name}/{topology-name}/sparkhistory/</td>
</tr>
<tr>
<td>Zeppelin</td>
<td>https://{gateway-host}:8443/{cluster-name}/{topology-name}/zeppelin/</td>
</tr>
</tbody>
</table>
<p><sup>*</sup> Refer to <a href="../hive/index.html#accessign-hive-via-jdbc">Accessing Hive via JDBC</a> for more information.</p>
<p>The following applies:</p>
<ul>
<li>The <code>gateway-host</code> is the IP address or hostname of the Ambari server node.  </li>
<li>The <code>cluster-name</code> is the name of the cluster.  </li>
<li>The <code>topology-name</code> is the name of the gateway topology that you entered when creating the cluster. By default this is set to <code>db-proxy</code>.    </li>
</ul>
<h3 id="configure-the-gateway">Configure the gateway</h3>
<p>When creating a cluster, you can configure the gateway on the <strong>Gateway Configuration</strong> page of the basic create cluster wizard. </p>
<p><strong>Steps</strong></p>
<ol>
<li>
<p>In the create cluster wizard, navigate to the <strong>Gateway Configuration</strong> page: </p>
<p><a href="../images/cb_cb-gateway01.png" target="_blank" title="click to enlarge"><img src="../images/cb_cb-gateway01.png" width="650" title="Cluster Information"></a>  </p>
</li>
<li>
<p>Under <strong>Gateway Topology</strong>:</p>
<ul>
<li>The gateway option is enabled by default.  </li>
<li>The <strong>Name</strong> for your gateway is set to <code>db-proxy</code> by default. You can update it if you would like. This name is used in the URLs for the cluster resources, as described in <a href="#services-available-via-gateway">Services available via gateway</a>. </li>
<li>Under <strong>Exposable Services</strong>, the choice of cluster services to expose and proxy through the gateway depends on your blueprint. Cloudbreak analyzes your blueprint and provides a list of services that can be exposed through the gateway. You should review this list and select the services that should be proxied through the gateway. By default, only Ambari is exposed through the gateway. </li>
<li>We recommend that you expose the following services through the gateway:<ul>
<li><strong>Analytics blueprint</strong>: Hive and Zeppelin</li>
<li><strong>ETL blueprint</strong>: No additional services need to be exposed</li>
<li><strong>Data science</strong>: Spark and Zeppelin   </li>
</ul>
</li>
</ul>
</li>
<li>
<p>Under <strong>Exposable Services</strong>, use the dropdown to select services that should be exposed via the gateway. To expose a service, select it and click <strong>Expose</strong>. Select <strong>ALL</strong> to expose all. </p>
</li>
</ol>
<h3 id="obtain-urls-for-cluster-resources">Obtain URLs for cluster resources</h3>
<p>Once your cluster is running, you can obtain Ambari URL and the URLs of the cluster services from the <strong>Gateway</strong> tab in the cluster details:</p>
<blockquote>
<p>This tab is only available when gateway is enabled. </p>
</blockquote>
<p><a href="../images/cb_cb-gateway02.png" target="_blank" title="click to enlarge"><img src="../images/cb_cb-gateway02.png" width="650" title="Cluster Information"></a></p>
<p>The URL structure is as described in <a href="#services-available-via-gateway">Services available via gateway</a>.</p>
<h3 id="configure-single-sign-on-sso">Configure single sign-on (SSO)</h3>
<p>When creating a cluster, if you selected to configure a gateway, on the advanced <strong>Gateway Configuration</strong> page of the advanced create cluster wizard, you can also configure the gateway to be the SSO identity provider. </p>
<blockquote>
<p>This option is technical preview. </p>
</blockquote>
<p><strong>Prerequisites</strong></p>
<p>You must have an existing authentication source (LDAP or AD) and register it with Cloudbreak, as described in <a href="../external-ldap/index.html">Using an external authentication source for clusters</a>. </p>
<p><strong>Steps</strong></p>
<ol>
<li>In the create cluster wizard, select the advanced mode.  </li>
<li>On the <strong>External Sources</strong> page, under <strong>Configure Authentication</strong>, select to attach a previously configured LDAP to the cluster.  </li>
<li>On the <strong>Gateway Configuration</strong> page, under <strong>Single Sign On (SSO)</strong>, click the toggle button to enable SSO.</li>
</ol></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>© 2011-2018 <a href="http://www.hortonworks.com" target="_blank">Hortonworks Inc</a>. All Rights Reserved. | <a href="http://hortonworks.com/privacy-policy/" target="_blank">Privacy Policy</a><br></small>
        
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../js/jquery-1.10.2.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '..';
    </script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
    <script src="../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
