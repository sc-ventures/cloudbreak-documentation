<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel="canonical" href="http://hortonworks.github.io/cloudbreak-documentation/azure-create/index.html"> 
    <link rel="shortcut icon" href="../images/favicon.png">

    <title>Create a cluster - Cloudbreak</title>

    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">


    <link href="../css/extra.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
    <script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-22950817-24', 'auto');
    ga('send', 'pageview');
    </script>
    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../index.html">Cloudbreak</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Intro <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../index.html">Introduction</a>
</li>

                        
                            
<li >
    <a href="../architecture/index.html">Architecture</a>
</li>

                        
                            
<li >
    <a href="../concepts/index.html">Core concepts</a>
</li>

                        
                            
<li >
    <a href="../deployment-options/index.html">Deployment options</a>
</li>

                        
                            
<li >
    <a href="../security/index.html">Security overview</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Quickstart <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../aws-quick/index.html">Quickstart on AWS</a>
</li>

                        
                            
<li >
    <a href="../azure-quick/index.html">Quickstart on Azure</a>
</li>

                        
                            
<li >
    <a href="../gcp-quick/index.html">Quickstart on GCP</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">AWS <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../aws-pre/index.html">Prerequisites</a>
</li>

                        
                            
<li >
    <a href="../aws-launch/index.html">Launch on AWS</a>
</li>

                        
                            
<li >
    <a href="../aws-create/index.html">Create a cluster</a>
</li>

                        
                            
<li >
    <a href="../aws-data/index.html">Configure access to S3</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Azure <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../azure-pre/index.html">Prerequisites</a>
</li>

                        
                            
<li >
    <a href="../azure-launch/index.html">Launch on Azure</a>
</li>

                        
                            
<li class="active">
    <a href="index.html">Create a cluster</a>
</li>

                        
                            
<li >
    <a href="../azure-data-adls/index.html">Configure access to ADLS</a>
</li>

                        
                            
<li >
    <a href="../azure-data-wasb/index.html">Configure access to WASB</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">GCP <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../gcp-pre/index.html">Prerequisites</a>
</li>

                        
                            
<li >
    <a href="../gcp-launch/index.html">Launch on GCP</a>
</li>

                        
                            
<li >
    <a href="../gcp-create/index.html">Create a cluster</a>
</li>

                        
                            
<li >
    <a href="../gcp-data/index.html">Configure access to GCS</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">OpenStack <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../os-pre/index.html">Prerequisites</a>
</li>

                        
                            
<li >
    <a href="../os-launch/index.html">Launch on OpenStack</a>
</li>

                        
                            
<li >
    <a href="../os-create/index.html">Create a cluster</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Using Cloudbreak <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Advanced cluster options</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../gateway/index.html">Configure the gateway</a>
</li>

        
            
<li >
    <a href="../blueprints/index.html">Use custom blueprints</a>
</li>

        
            
<li >
    <a href="../recipes/index.html">Use custom scripts (recipes)</a>
</li>

        
            
<li >
    <a href="../mpacks/index.html">Use management packs</a>
</li>

        
            
<li >
    <a href="../images/index.html">Use custom images</a>
</li>

        
            
<li >
    <a href="../tags/index.html">Tag resources</a>
</li>

        
            
<li >
    <a href="../properties/index.html">Set custom properties</a>
</li>

        
            
<li >
    <a href="../security-kerberos/index.html">Enable Kerberos security</a>
</li>

        
            
<li >
    <a href="../autoscaling/index.html">Configure autoscaling</a>
</li>

        
            
<li >
    <a href="../external-db/index.html">Register external database</a>
</li>

        
            
<li >
    <a href="../external-ldap/index.html">Register external authentication source</a>
</li>

        
            
<li >
    <a href="../external-proxy/index.html">Register proxy configuration</a>
</li>

        
            
<li >
    <a href="../hostnames/index.html">Use custom hostnames based on DNS</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Advanced Cloudbreak options</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../cb-credentials/index.html">Manage Cloudbreak credentials</a>
</li>

        
            
<li >
    <a href="../cb-migrate/index.html">Move Cloudbreak instance</a>
</li>

        
            
<li >
    <a href="../cb-ldap/index.html">Configure LDAP/AD authentication for Cloudbreak</a>
</li>

        
            
<li >
    <a href="../security-cb-ssl/index.html">Add SSL certificate for Cloudbreak UI</a>
</li>

        
            
<li >
    <a href="../cb-proxy/index.html">Configure outbound internet access and proxy</a>
</li>

        
            
<li >
    <a href="../security-cb-inbound/index.html">Restrict inbound access to clusters</a>
</li>

        
            
<li >
    <a href="../security-cb-customdom/index.html">Configure access from custom domains</a>
</li>

        
            
<li >
    <a href="../cb-db/index.html">Configure external Cloudbreak database</a>
</li>

        
            
<li >
    <a href="../cb-disable-provider/index.html">Disable providers</a>
</li>

        
            
<li >
    <a href="../cb-ports/index.html">Change default Cloudbreak ports</a>
</li>

        
            
<li >
    <a href="../cb-email/index.html">Set up email notifications</a>
</li>

        
            
<li >
    <a href="../cb-profile/index.html">Modify settings in Cloudbreak Profile</a>
</li>

        
            
<li >
    <a href="../os-image-import/index.html">Manually import HDP and HDF images to OpenStack</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../hdf/index.html">Creating an HDF cluster</a>
</li>

                        
                            
<li >
    <a href="../data-lake/index.html">Setting up a data lake</a>
</li>

                        
                            
<li >
    <a href="../clusters-access/index.html">Accessing a cluster</a>
</li>

                        
                            
<li >
    <a href="../clusters-manage/index.html">Managing clusters</a>
</li>

                        
                            
<li >
    <a href="../hive/index.html">Accessing Hive via JDBC</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cloudbreak CLI</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../cli-install/index.html">Install the CLI</a>
</li>

        
            
<li >
    <a href="../cli-get-started/index.html">Get started with the CLI</a>
</li>

        
            
<li >
    <a href="../cli-reference/index.html">CLI Reference</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Troubleshooting</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../trouble-cb-logs/index.html">Cloudbreak logs</a>
</li>

        
            
<li >
    <a href="../trouble-cb/index.html">Troubleshooting Cloudbreak</a>
</li>

        
            
<li >
    <a href="../trouble-cluster/index.html">Troubleshooting cluster creation</a>
</li>

        
            
<li >
    <a href="../trouble-aws/index.html">Troubleshooting AWS</a>
</li>

        
            
<li >
    <a href="../trouble-azure/index.html">Troubleshooting Azure</a>
</li>

        
            
<li >
    <a href="../trouble-gcp/index.html">Troubleshooting GCP</a>
</li>

        
            
<li >
    <a href="../trouble-cli/index.html">Troubleshooting Cloudbreak CLI</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../cb-upgrade/index.html">Upgrade Cloudbreak</a>
</li>

                        
                            
<li >
    <a href="../cb-delete/index.html">Delete Cloudbreak</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">More <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../releasenotes/index.html">Release Notes</a>
</li>

                        
                            
<li >
    <a href="../faq/index.html">FAQs</a>
</li>

                        
                            
<li >
    <a href="../dev/index.html">Developer documentation links</a>
</li>

                        
                            
<li >
    <a href="../get-help/index.html">Getting help</a>
</li>

                        
                            
<li >
    <a href="../smartsense/index.html">SmartSense telemetry</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Legal</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../acknowledge/index.html">Acknowledgements</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                
                    <li >
                        <a rel="next" href="../azure-launch/index.html">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../azure-data-adls/index.html">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/hortonworks/cloudbreak-documentation">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#creating-a-cluster-on-azure">Creating a cluster on Azure</a></li>
        
            <li class="second-level"><a href="#advanced-cluster-options">Advanced cluster options</a></li>
            
                <li class="third-level"><a href="#enable-lifetime-management">Enable lifetime management</a></li>
            
                <li class="third-level"><a href="#tags">Tags</a></li>
            
                <li class="third-level"><a href="#choose-image-catalog">Choose image catalog</a></li>
            
                <li class="third-level"><a href="#choose-image-type">Choose image type</a></li>
            
                <li class="third-level"><a href="#choose-image">Choose image</a></li>
            
                <li class="third-level"><a href="#ambari-repo-specification">Ambari repo specification</a></li>
            
                <li class="third-level"><a href="#hdphdf-repo-specification">HDP/HDF repo specification</a></li>
            
                <li class="third-level"><a href="#root-volume-size">Root volume size</a></li>
            
                <li class="third-level"><a href="#availability-sets">Availability sets</a></li>
            
                <li class="third-level"><a href="#cloud-storage">Cloud storage</a></li>
            
                <li class="third-level"><a href="#recipes">Recipes</a></li>
            
                <li class="third-level"><a href="#management-packs">Management packs</a></li>
            
                <li class="third-level"><a href="#external-sources">External sources</a></li>
            
                <li class="third-level"><a href="#custom-properties">Custom properties</a></li>
            
                <li class="third-level"><a href="#single-sign-on-sso">Single sign-on (SSO)</a></li>
            
                <li class="third-level"><a href="#dont-create-public-ip">Don't create public IP</a></li>
            
                <li class="third-level"><a href="#dont-create-new-firewall-rules">Don't create new firewall rules</a></li>
            
                <li class="third-level"><a href="#ambari-server-master-key">Ambari server master key</a></li>
            
                <li class="third-level"><a href="#enable-azure-disk-encryption">Enable Azure disk encryption</a></li>
            
                <li class="third-level"><a href="#enable-kerberos-security">Enable Kerberos security</a></li>
            
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h2 id="creating-a-cluster-on-azure">Creating a cluster on Azure</h2>
<p>Use these steps to create a cluster.</p>
<div class="note">
<p class="first admonition-title">Troubleshooting cluster creation</p>
<p class="last">If you experience problems during cluster creation, refer to <a href="../trouble-cluster/index.html">Troubleshooting cluster creation</a>.</p></div>

<p><strong>Steps</strong></p>
<ol>
<li>
<p>Log in to the Cloudbreak UI.</p>
</li>
<li>
<p>Click the <strong>Create Cluster</strong> button and the <em>Create Cluster</em> wizard is displayed.<br />
    By default, <strong>Basic</strong> view is displayed. To view advanced options, click <strong>Advanced</strong>. To learn about advanced options, refer to <a href="#advanced-cluster-options">Advanced cluster options</a>.</p>
<p><a href="../images/cb_cb-create.png" target="_blank" title="click to enlarge"><img src="../images/cb_cb-create.png" width="650" title="Cluster Information"></a> </p>
</li>
<li>
<p>On the <strong>General Configuration</strong> page, specify the following general parameters for your cluster:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Select Credential</td>
<td>Choose a previously created credential.</td>
</tr>
<tr>
<td>Cluster Name</td>
<td>Enter a name for your cluster. The name must be between 5 and 40 characters, must start with a letter, and must only include lowercase letters, numbers, and hyphens.</td>
</tr>
<tr>
<td>Region</td>
<td>Select the Azure region in which you would like to launch your cluster. For information on available Azure regions, refer to <a href="https://azure.microsoft.com/en-us/regions/">Azure documentation</a>.</td>
</tr>
<tr>
<td>Platform Version</td>
<td>Choose the HDP or HDF version to use for this cluster. Blueprints available for this platform version will be populated under "Cluster Type" below. If you selected the <strong>HDF</strong> platform, refer to <a href="../hdf/index.html">Creating HDF clusters</a> for HDF cluster configuration tips.</td>
</tr>
<tr>
<td>Cluster Type</td>
<td>Choose one of the default cluster configurations, or, if you have defined your own cluster configuration via Ambari blueprint, you can choose it here. For more information on default and custom blueprints, refer to <a href="../blueprints/index.html">Using custom blueprints</a>.</td>
</tr>
<tr>
<td>Flex Subscription</td>
<td>This option will appear if you have configured your deployment for a <a href="../get-help/index.html#flex-subscription">flex support subscription</a>.</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>On the <strong>Hardware and Storage</strong> page, for each host group provide the following information to define your cluster nodes and attached storage. </p>
<p>To edit this section, click on the <img src="../images/cb_edit.png"/>. When done editing, click on the <img src="../images/cb_save.png" width="25"/> to save the changes.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ambari Server</td>
<td>You must select one node for Ambari Server by clicking the <img src="../images/cb_toggle.png" alt="On"/> button. The "Instance Count" for that host group must be set to "1". If you are using one of the default blueprints, this is set by default.</td>
</tr>
<tr>
<td>Instance Type</td>
<td>Select an instance type. For information about instance types on Azure refer to <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/sizes-general">Azure documentation</a>.</td>
</tr>
<tr>
<td>Instance Count</td>
<td>Enter the number of instances of a given type. Default is 1.</td>
</tr>
<tr>
<td>Storage Type</td>
<td><p>Select the volume type. The options are:<ul><li>Locally-redundant storage</li><li>Geo-redundant storage</li><li>Premium locally-redundant storage</li></ul> For more information about these options refer to <a href="https://docs.microsoft.com/en-us/azure/storage/storage-introduction" target="_blank">Azure documentation</a>.</td>
</tr>
<tr>
<td>Attached Volumes Per Instance</td>
<td>Enter the number of volumes attached per instance. Default is 1.</td>
</tr>
<tr>
<td>Volume Size</td>
<td>Enter the size in GBs for each volume. Default is 100.</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>On the <strong>Gateway Configuration</strong> page, you can access gateway configuration options. </p>
<p>When creating a cluster, Cloudbreak installs and configures a gateway (powered by Apache Knox) to protect access to the cluster resources. By default, the gateway is enabled for Ambari; You can optionally enable it for other cluster services. </p>
<p>For more information, refer to <a href="../gateway/index.html">Configuring the Gateway</a> documentation.</p>
</li>
<li>
<p>On the <strong>Network</strong> page, provide the following to specify the networking resources that will be used for your cluster:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Select Network</td>
<td>Select the virtual network in which you would like your cluster to be provisioned. You can select an existing network or create a new network.</td>
</tr>
<tr>
<td>Select Subnet</td>
<td>Select the subnet in which you would like your cluster to be provisioned. If you are using a new network, create a new subnet. If you are using an existing network, select an existing subnet.</td>
</tr>
<tr>
<td>Subnet (CIDR)</td>
<td>If you selected to create a new subnet, you must define a valid <a href="http://www.ipaddressguide.com/cidr">CIDR</a> for the subnet. Default is 10.0.0.0/16.</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Cloudbreak uses public IP addresses when communicating with cluster nodes.  </p>
</blockquote>
</li>
<li>
<p>Define security groups for each host group. You can either create new security groups and define their rules or reuse existing security groups:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>New Security Group</td>
<td><p>(Default) Creates a new security group with the rules that you defined:</p><p><ul><li>A set of <a href="../security/index.html#default-cluster-security-groups">default rules</a> is provided. You should review and adjust these default rules. If you do not make any modifications, default rules will be applied. </li><li>You may open ports by defining the CIDR, entering port range, selecting protocol and clicking <strong>+</strong>.</li><li>You may delete default or previously added rules using the delete icon.</li><li>If you don't want to use security group, remove the default rules.</li><ul></p></td>
</tr>
<tr>
<td>Existing Security Groups</td>
<td>Allows you to select an existing security group that is already available in the selected provider region. This selection is disabled if no existing security groups are available in your chosen region.</td>
</tr>
</tbody>
</table>
<p>The default experience of creating network resources such as network, subnet and security group automatically is provided for convenience. We strongly recommend you review these options and for production cluster deployments leverage your existing network resources that you have defined and validated to meet your enterprise requirements. For more information, refer to <a href="../security-cb-inbound/index.html">Restricting inbound access from Cloudbreak to cluster</a>. </p>
</li>
<li>
<p>On the <strong>Security</strong> page, provide the following parameters:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cluster User</td>
<td>You can log in to the Ambari UI using this username. By default, this is set to <code>admin</code>.</td>
</tr>
<tr>
<td>Password</td>
<td>You can log in to the Ambari UI using this password.</td>
</tr>
<tr>
<td>Confirm Password</td>
<td>Confirm the password.</td>
</tr>
<tr>
<td>New SSH public key</td>
<td>Check this option to specify a new public key and then enter the public key. You will use the matching private key to access your cluster nodes via SSH.</td>
</tr>
<tr>
<td>Existing SSH public key</td>
<td>Select an existing public key. You will use the matching private key to access your cluster nodes via SSH. This is a default option as long as an existing SSH public key is available.</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click on <strong>Create Cluster</strong> to create a cluster.</p>
</li>
<li>
<p>You will be redirected to the Cloudbreak dashboard, and a new tile representing your cluster will appear at the top of the page.</p>
</li>
</ol>
<p><strong>Related links</strong><br />
<a href="../get-help/index.html#flex-subscription">Flex support subscription</a><br />
<a href="../blueprints/index.html">Using custom blueprints</a> <br />
<a href="../security/index.html#default-cluster-security-groups">Default cluster security groups</a><br />
<a href="../trouble-cluster/index.html">Troubleshooting cluster creation</a> <br />
<a href="https://azure.microsoft.com/en-us/regions/">Azure regions</a> (External)   <br />
<a href="http://www.ipaddressguide.com/cidr">CIDR</a> (External)<br />
<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/sizes-general">General purpose Linux VM sizes</a> (External)  </p>
<h3 id="advanced-cluster-options">Advanced cluster options</h3>
<p>Click on <strong>Advanced</strong> to view and enter additional configuration options</p>
<h4 id="enable-lifetime-management">Enable lifetime management</h4>
<p>Check this option if you would like your cluster to be automatically terminated after a specific amount of time (defined as "Time to Live" in minutes). </p>
<h4 id="tags">Tags</h4>
<p>You can optionally add tags, which will help you find your cluster-related resources, such as VMs, in your cloud provider account. </p>
<p>By default, the following tags are created:</p>
<table>
<thead>
<tr>
<th>Tag</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>cb-version</td>
<td>Cloudbreak version</td>
</tr>
<tr>
<td>Owner</td>
<td>Your Cloudbreak admin email.</td>
</tr>
<tr>
<td>cb-account-name</td>
<td>Your automatically generated Cloudbreak account name stored in the identity server.</td>
</tr>
<tr>
<td>cb-user-name</td>
<td>Your Cloudbreak admin email.</td>
</tr>
</tbody>
</table>
<p>For more information, refer to <a href="../tags/index.html">Tagging resources</a>.</p>
<p><strong>Related links</strong>    <br />
<a href="../tags/index.html">Tagging resources</a> </p>
<h4 id="choose-image-catalog">Choose image catalog</h4>
<p>By default, <strong>Choose Image Catalog</strong> is set to the default image catalog that is provided with Cloudbreak. If you would like to use a different image catalog, you must first create and register it. For complete instructions, refer to <a href="../images/index.html">Using custom images</a>.</p>
<p><strong>Related links</strong>   <br />
<a href="../images/index.html">Using custom images</a>  </p>
<h4 id="choose-image-type">Choose image type</h4>
<p>Cloudbreak supports the following types of images for launching clusters:</p>
<table>
<thead>
<tr>
<th>Image type</th>
<th>Description</th>
<th>Default images provided</th>
<th>Support for custom images</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Prewarmed Image</strong></td>
<td>By default, Cloudbreak launches clusters from prewarmed images. Prewarmed images include the operating system as well as Ambari and HDP/HDF. The Ambari and HDP/HDF version used by prewarmed images cannot be customized.</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><strong>Base Image</strong></td>
<td>Base images include default configuration and default tooling. These images include the operating system but do not include Ambari or HDP/HDF software.</td>
<td>Yes</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>By default, Cloudbreak uses the included default <strong>prewarmed images</strong>, which include the operating system, as well as
Ambari and HDP/HDF packages installed. You can optionally select the <strong>base image</strong> option if you would like to:</p>
<ul>
<li>Use an Ambari and HDP/HDF versions different than what the prewarmed image includes and/or  </li>
<li>Choose a previously created custom base image</li>
</ul>
<h4 id="choose-image">Choose image</h4>
<p>If under <a href="#choose-image-catalog">Choose image catalog</a>, you selected a custom image catalog, under <strong>Choose Image</strong> you can select an image from that catalog. For complete instructions, refer to <a href="../images/index.html">Using custom images</a>. </p>
<p>If you are trying to customize Ambari and HDP/HDF versions, you can ignore the <strong>Choose Image</strong> option; in this case default base image is used.</p>
<h4 id="ambari-repo-specification">Ambari repo specification</h4>
<p>If you would like to use a custom Ambari version, provide the following information: </p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>Version</td>
<td>Enter Ambari version.</td>
<td>2.6.1.3</td>
</tr>
<tr>
<td>Repo Url</td>
<td>Provide a URL to the Ambari version repo that you would like to use.</td>
<td>http://public-repo-1.hortonworks.com/ambari/centos6/2.x/updates/2.6.1.3</td>
</tr>
<tr>
<td>Repo Gpg Key Url</td>
<td>Provide a URL to the repo GPG key. Each stable RPM package that is published by CentOS Project is signed with a GPG signature. By default, yum and the graphical update tools will verify these signatures and refuse to install any packages that are not signed, or have an incorrect signature.</td>
<td>http://public-repo-1.hortonworks.com/ambari/centos6/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins</td>
</tr>
</tbody>
</table>
<h4 id="hdphdf-repo-specification">HDP/HDF repo specification</h4>
<p>If you would like to use a custom HDP or HDF version, provide the following information: </p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>Stack</td>
<td>This is populated by default based on the "Platform Version" parameter.</td>
<td>HDP</td>
</tr>
<tr>
<td>Version</td>
<td>This is populated by default based on the "Platform Version" parameter.</td>
<td>2.6</td>
</tr>
<tr>
<td>OS</td>
<td>Operating system.</td>
<td>centos7 (Azure, GCP, OpenStack) or amazonlinux (AWS)</td>
</tr>
<tr>
<td>Repository Version</td>
<td>Enter repository version.</td>
<td>2.6.4.0-91</td>
</tr>
<tr>
<td>Version Definition File</td>
<td>Enter the URL of the VDF file.</td>
<td>http://public-repo-1.hortonworks.com/HDP/centos6/2.x/updates/2.6.4.0/HDP-2.6.4.0-91.xml</td>
</tr>
<tr>
<td>(HDF only) MPack Url</td>
<td>(HDF only) Provide MPack URL.</td>
<td>http://public-repo-1.hortonworks.com/HDF/centos7/3.x/updates/3.1.1.0/tars/hdf_ambari_mp/hdf-ambari-mpack-3.1.1.0-35.tar.gz</td>
</tr>
<tr>
<td>Enable Ambari Server to download and install GPL Licensed LZO packages?</td>
<td>(Optional, only available if using Ambari 2.6.1.0 or newer) Use this option to enable LZO compression in your HDP/HDF cluster. LZO is a lossless data compression library that favors speed over compression ratio. Ambari does not install nor enable LZO compression libraries by default, and must be explicitly configured to do so. For more information, refer to <a href="https://docs.hortonworks.com/HDPDocuments/Ambari-2.6.1.0/bk_ambari-administration/content/enabling_lzo.html">Enabling LZO</a>.</td>
<td><img src="../images/cb_toggle.png" alt="On"/></td>
</tr>
</tbody>
</table>
<p>If you choose to use a base image with custom Ambari and/or HDP/HDF version, Cloudbreak validates the information entered. When Cloudbreak detects that the information entered is incorrect, it displays a warning marked with the <img src="../images/cb_warning.png" width="25" title="Icon"> sign. You should review all the warnings before proceeding and make sure that the information that you entered is correct. If you choose to proceed in spite of the warnings, check "Ignore repository warnings".  </p>
<p><strong>Related links</strong>    <br />
<a href="../images/index.html">Using custom images</a>      </p>
<h4 id="root-volume-size">Root volume size</h4>
<p>Use this option to increase the root volume size. Default is 30 GB. This option is useful if your custom image requires more space than the default 30 GB.</p>
<p>If you change the value of the root volume size, an osDisk with the given rootVolumeSize will be created for the instance automatically; However, you will have to manually resize the osDisk partition by using the steps provided in the <a href="https://blogs.msdn.microsoft.com/linuxonazure/2017/04/03/how-to-resize-linux-osdisk-partition-on-azure/">Azure documentation</a>.</p>
<p><strong>Related links</strong><br />
<a href="https://blogs.msdn.microsoft.com/linuxonazure/2017/04/03/how-to-resize-linux-osdisk-partition-on-azure/">How to: Resize Linux osDisk partition on Azure</a>  </p>
<h4 id="availability-sets">Availability sets</h4>
<p>To support fault tolerance for VMs, Azure uses the concept of <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/manage-availability">availability sets</a>. This allows two or more VMs to be mapped to multiple fault domains, each of which defines a group of virtual machines that share a common power source and a network switch. When adding VMs to an availability set, Azure automatically assigns each VM a fault domain. The SLA includes guarantees that during OS Patching in Azure or during maintenance operations, at least one VM belonging to a given fault domain will be available.</p>
<p>In Cloudbreak, an availability set is automatically configured during cluster creation for each host group with "Instance Count" that is set to 1 or larger. The assignment of fault domains is automated by Azure, so there is no option for this in Cloudbreak UI. </p>
<p>Cloudbreak allows you to configure the availability set on the advanced <strong>Hardware and Storage</strong> page of the create cluster wizard by providing the following options for each host group:  </p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>Availability Set Name</td>
<td>Choose a name for the availability set that will be created for the selected host group</td>
<td>The following convention is used: "clustername-hostgroupname-as"</td>
</tr>
<tr>
<td>Fault Domain Count</td>
<td>The number of fault domains.</td>
<td>2 or 3, depending on the setting supported by Azure</td>
</tr>
<tr>
<td>Update Domain Count</td>
<td>This number of update domains. This can be set to a number in range of 2-20.</td>
<td>20</td>
</tr>
</tbody>
</table>
<p>After the deployment is finished, you can check the layout of the VMs inside an availability set on Azure Portal. You will find the "Availability set" resources corresponding to the host groups inside the deployment's resource group.</p>
<h4 id="cloud-storage">Cloud storage</h4>
<p>If you would like to access ADLS or WASB from your cluster, you must configure access as described in <a href="../azure-data-adls/index.html">Configuring access to ADLS</a> or <a href="../azure-data-wasb/index.html">Configuring access to WASB</a>. </p>
<p><strong>Related links</strong><br />
<a href="../azure-data-adls/index.html">Configuring access to ADLS</a><br />
<a href="../azure-data-wasb/index.html">Configuring access to WASB</a>  </p>
<h4 id="recipes">Recipes</h4>
<p>This option allows you to select previously uploaded recipes (scripts that can be run pre or post cluster deployment) for each host group. For more information on recipes, refer to <a href="../recipes/index.html">Using custom scripts (recipes)</a>. </p>
<p><strong>Related links</strong>    <br />
<a href="../recipes/index.html">Using custom scripts (recipes)</a> </p>
<h4 id="management-packs">Management packs</h4>
<p>This option allows you to select previously uploaded management packs. For more information on management packs, refer to <a href="../mpacks/index.html">Using management packs</a>. </p>
<p><strong>Related links</strong>    <br />
<a href="../mpacks/index.html">Using management packs</a>  </p>
<h4 id="external-sources">External sources</h4>
<p>You can register external sources with Cloudbreak, and then select and attach them during cluster create. To register external sources with Cloudbreak, refer to:</p>
<ul>
<li><a href="../external-ldap/index.html">Using an external authentication source</a>    </li>
<li><a href="../external-db/index.html">Using an external database</a>  </li>
<li><a href="../external-proxy/index.html">Register a proxy</a>  </li>
</ul>
<h4 id="custom-properties">Custom properties</h4>
<p>This option allows you to set custom properties based on the template defined in your custom blueprint. For more information, refer to <a href="../properties/index.html">Set custom properties</a>. </p>
<p><strong>Related links</strong>    <br />
<a href="../properties/index.html">Set custom properties</a>   </p>
<h4 id="single-sign-on-sso">Single sign-on (SSO)</h4>
<p>This option allows you to configure the gateway to be the SSO identity provider. </p>
<blockquote>
<p>This option is technical preview. </p>
</blockquote>
<p>For more information, refer to <a href="../gateway/index.html">Configuring the Gateway</a> documentation.  </p>
<h4 id="dont-create-public-ip">Don't create public IP</h4>
<p>This option is available if you are creating a cluster in an existing network and subnet. Select this option if you don't want to use public IPs for the network. </p>
<h4 id="dont-create-new-firewall-rules">Don't create new firewall rules</h4>
<p>This option is available if you are creating a cluster in an existing network and subnet. Select this option if you don't want to create new firewall rules for the network. </p>
<h4 id="ambari-server-master-key">Ambari server master key</h4>
<p>The Ambari server master key is used to configure Ambari to encrypt database and Kerberos credentials that are retained by Ambari as part of the Ambari setup.  </p>
<h4 id="enable-azure-disk-encryption">Enable Azure disk encryption</h4>
<p>Check this option if you would like to have your virtual machine disks encrypted using the Azure Disk Encryption capability provided by Azure. For more information, refer to <a href="https://docs.microsoft.com/en-us/azure/security/azure-security-disk-encryption">Azure documentation</a>.  </p>
<h4 id="enable-kerberos-security">Enable Kerberos security</h4>
<p>Select this option to enable Kerberos for your cluster. For information about available Kerberos options, refer to <a href="../security-kerberos/index.html">Enabling Kerberos security</a>. </p>
<p><strong>Related links</strong>    <br />
<a href="../security-kerberos/index.html">Enabling Kerberos security</a> <br />
<a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-introduction">Introduction to Microsoft Azure storage</a> (External)  </p>
<div class="next">
<a href="../azure-data-adls/index.html">Next: Configure Access to ADLS</a>
</div></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>© 2011-2018 <a href="http://www.hortonworks.com" target="_blank">Hortonworks Inc</a>. All Rights Reserved. | <a href="http://hortonworks.com/privacy-policy/" target="_blank">Privacy Policy</a><br></small>
        
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../js/jquery-1.10.2.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '..';
    </script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
    <script src="../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
